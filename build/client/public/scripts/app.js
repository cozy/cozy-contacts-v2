!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},o={}.hasOwnProperty,n={},a=function(t,e){var r=0;e&&(e.indexOf(!1)&&(r="components/".length),e.indexOf("/",r)>0&&(e=e.substring(r,e.indexOf("/",r))));var o=n[t+"/index.js"]||n[e+"/deps/"+t+"/index.js"];return o?"components/"+o.substring(0,o.length-".js".length):t},i=function(){var t=/^\.\.?(\/|$)/;return function(e,r){var o,n,a=[];o=(t.test(r)?e+"/"+r:r).split("/");for(var i=0,s=o.length;s>i;i++)n=o[i],".."===n?a.pop():"."!==n&&""!==n&&a.push(n);return a.join("/")}}(),s=function(t){return t.split("/").slice(0,-1).join("/")},p=function(e){return function(r){var o=i(s(e),r);return t.require(o,e)}},c=function(t,e){var o={id:t,exports:{}};return r[t]=o,e(o.exports,p(t),o),o.exports},l=function(t,n){var s=i(t,".");if(null==n&&(n="/"),s=a(t,n),o.call(r,s))return r[s].exports;if(o.call(e,s))return c(s,e[s]);var p=i(s,"./index");if(o.call(r,p))return r[p].exports;if(o.call(e,p))return c(p,e[p]);throw new Error('Cannot find module "'+t+'" from "'+n+'"')};l.alias=function(t,e){n[e]=t},l.register=l.define=function(t,r){if("object"==typeof t)for(var n in t)o.call(t,n)&&(e[n]=t[n]);else e[t]=r},l.list=function(){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t},l.brunch=!0,t.require=l}}(),require.register("application",function(t,e,r){var o,n,a,i,s,p,c={}.hasOwnProperty,l=function(t,e){function r(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=e("routes"),i=e("collections/contacts"),p=e("collections/tags"),o=e("views/app_layout"),n=e("views/models/app"),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(){return this.on("before:start",function(t){return function(){return t.model=new n,t.contacts=new i,t.tags=new p,t.layout=new o({model:t.model}),t.router=new s,Backbone.history&&Backbone.history.start({pushState:!1}),"function"==typeof Object.freeze?Object.freeze(t):void 0}}(this)),this.on("start",function(t){return function(){return t.layout.render(),t.contacts.fetch({reset:!0}),t.tags.fetch({reset:!0})}}(this))},e}(Mn.Application),r.exports=new a}),require.register("collections/contacts",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.model=e("models/contact"),r.prototype.url="contacts",r}(Backbone.Collection)}),require.register("collections/tags",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.model=e("models/contact"),r.prototype.url="tags",r.prototype.parse=function(t){var e;return e=_.uniq(t,!0,function(t){return t.name.toLowerCase()})},r}(Backbone.Collection)}),require.register("config",function(t,e,r){r.exports={contact:{xtras:["bday"],datapoints:{main:["tel","email","adr"],types:{"default":["main","work","home"],social:["twitter:social","skype:chat"],url:["website","blog"]}}}}}),require.register("initialize",function(t,e,r){var o;o=e("./application"),$(function(){return Mn.Behaviors.behaviorsLookup=e("lib/behaviors"),window.t=e("lib/i18n"),o.start()})}),require.register("lib/behaviors/confirm",function(t,e,r){var o,n,a={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=e("lib/views/confirm"),r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.ui={confirms:"[data-confirm]"},r.prototype.events={"click @ui.confirms":"confirm"},r.prototype.initialize=function(t){return this.events=_.extend({},this.events,this._buildTriggers())},r.prototype.confirm=function(t){var e;return t.preventDefault(),t.stopPropagation(),e=this.$(t.currentTarget).data("confirm"),this._triggerView(e)},r.prototype._buildTriggers=function(){var t;return t=this.view,_.reduce(this.options.triggers,function(t,e,r){var o;return o=_.defaults({},e,{preventDefault:!0,stopPropagation:!0}),t[r]=function(t){var e;return t&&(t.preventDefault&&o.preventDefault&&t.preventDefault(),t.stopPropagation&&o.stopPropagation&&t.stopPropagation()),e=this._triggerView(o)},t},{})},r.prototype._triggerView=function(t){var r,o,a;return r=e("application"),a=_.pick(t,"title","message","btn_ok","btn_cancel"),o=new n({model:new Backbone.Model(a)}),Mn.bindEntityEvents(this,o,{"confirm:close":function(){return this.view.triggerMethod("confirm:close")},"confirm:true":function(){return this.view.triggerMethod("confirm:true"),t.event?this.view.triggerMethod(t.event):void 0}}),r.layout.showChildView("alerts",o),o},r}(Mn.Behavior)}),require.register("lib/behaviors/dialog",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.behaviors={Keyboard:{keymaps:{27:"key:escape"}}},e.prototype.ui={backdrop:"[role=separator]",content:"[role=contentinfo]"},e.prototype.triggers={"click @ui.backdrop":"click:backdrop"},e.prototype.events={"click @ui.content":"detectClickOutside"},e.prototype.initialize=function(){return this.listenTo(this.view,"click:backdrop",this.close),this.listenTo(this.view,"key:escape",this.close)},e.prototype.close=function(){return this.view.triggerMethod("dialog:close")},e.prototype.detectClickOutside=function(t){var e;return e=this.ui.content[0].getBoundingClientRect(),(t.pageX<e.left||t.pageX>e.right)&&(t.pageY<e.top||t.pageY>e.bottom)?this.close():void 0},e}(Mn.Behavior)}),require.register("lib/behaviors/dropdown",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.ui={trigger:"[aria-haspopup=true] > :first-child"},e.prototype.events={"click @ui.trigger":"toggleExpand",click:"closeAll"},e.prototype.toggleExpand=function(t){var e;return t.stopPropagation(),e=this.$(t.currentTarget).parent("[aria-haspopup]"),this.closeAll(e),e.attr("aria-expanded","true"!==e.attr("aria-expanded"))},e.prototype.closeAll=function(t){return this.$("[aria-haspopup=true]").not(t).attr("aria-expanded",!1)},e}(Mn.Behavior)}),require.register("lib/behaviors/form",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.behaviors={Keyboard:{keymaps:{13:"form:key:enter"}}},e.prototype.events=function(){return{"click @ui.add":"addField","keyup @ui.autoAdd":"addField","keyup @ui.inputs":_.debounce(this.updateFields,250),"change @ui.inputs":"updateFields","click @ui.clear":"clearField","click @ui.delete":"deleteField"}},e.prototype.triggers={"click @ui.submit":"form:submit"},e.prototype.updateFields=function(t,e){var r,o;return null==e&&(e=t.currentTarget),(r={}).setValueOf(e.name,e.value),null!=(o=this.view.model)&&o.set(r,{silent:!0}),e.classList.toggle("empty",""===e.value),this.view.triggerMethod("form:field:update",e,t)},e.prototype.addField=function(t){var e,r,o;return"click"===t.type?this.view.triggerMethod("form:field:add",t.currentTarget.value):(e=this.$(t.currentTarget).parents("[data-type]"),o=e.data("type"),(r=!!e.find(".value").filter(function(){return!this.value}).length)?void 0:this.view.triggerMethod("form:field:add",o))},e.prototype.clearField=function(t){var e;return e=this.$(t.currentTarget).prev(".value"),e.val(null),this.view.triggerMethod("form:field:clear",t),this.updateFields(t,e[0])},e.prototype.deleteField=function(t){var e;return e=this.$(t.currentTarget).parents("[data-cid]").data("cid"),this.view.triggerMethod("form:field:delete",e,t)},e}(Mn.Behavior)}),require.register("lib/behaviors/index",function(t,e,r){var o;o={Confirm:e("./confirm"),Dialog:e("./dialog"),Dropdown:e("./dropdown"),Form:e("./form"),Keyboard:e("./keyboard"),Navigator:e("./navigator")},r.exports=o}),require.register("lib/behaviors/keyboard",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults={eventName:"keydown"},e.prototype.events=function(){var t,e;if(this.options.keymaps)return e=_.mapObject(this.options.keymaps,this._buildKeyboardTrigger),(t={})[this.options.eventName]=function(t){return function(r){var o;return o=r.which.toString(),i.call(_.keys(e),o)<0?void 0:e[o].call(t,r)}}(this),t},e.prototype._buildKeyboardTrigger=function(t){var e,r,o;return r=_.isObject(t),o=_.defaults({},r?t:{},{preventDefault:!0,stopPropagation:!0}),e=r?o.event:t,function(t){return t&&(t.preventDefault&&o.preventDefault&&t.preventDefault(),t.stopPropagation&&o.stopPropagation&&t.stopPropagation()),this.view.triggerMethod(e,t)}},e}(Mn.Behavior)}),require.register("lib/behaviors/navigator",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.behaviors={Confirm:{}},r.prototype.events={"click @ui.navigate":"navigate"},r.prototype.navigate=function(t){var r;return t.preventDefault(),r=function(){var r,o;return o=t.currentTarget,r=o.dataset.next||o.getAttribute("href"),e("application").router.navigate(r,{trigger:!0})},t.currentTarget.dataset.confirm?Mn.bindEntityEvents(this,this.view,{"confirm:true":r,"confirm:close":function(){return Mn.unbindEntityEvents(this,this.view)}}):r()},r}(Mn.Behavior)}),require.register("lib/diacritics",function(t,e,r){var o,n,a;o=/[\u0041-\u005A\u0061-\u007A]/g,a={A:/[\u00C0-\u00C5]/g,AE:/[\u00C6]/g,a:/[\u00E0-\u00E5]/g,ae:/[\u00E6]/g,C:/[\u00C7]/g,c:/[\u00E7]/g,D:/[\u00D0]/g,d:/[\u00F0]/g,E:/[\u00C8-\u00CB]/g,e:/[\u00E8-\u00EB]/g,I:/[\u00CC-\u00CF]/g,i:/[\u00EC-\u00EF]/g,N:/[\u00D1]/g,n:/[\u00F1]/g,O:/[\u00D2-\u00D6\u00D8]/g,o:/[\u00F2-\u00F6\u00F8]/g,OE:/[\u0152]/g,oe:/[\u0153]/g,U:/[\u00D9-\u00DC]/g,u:/[\u00F9-\u00FC]/g,Y:/[\u00DD]/g,y:/[\u00FD\u00FF]/g},n=function(t){var e,r;for(r in a)e=a[r],t=t.replace(e,r);return t},r.exports={alphabet:o,diacritics:a,asciize:n}}),require.register("lib/i18n",function(t,e,r){var o;o=function(){var t,r,o,n;r=$("html").attr("lang");try{o=e("locales/"+r)}catch(a){t=a,o=e("locales/en")}return n=new Polyglot({phrases:o,locale:r}),n.t.bind(n)},r.exports=o()}),require.register("lib/regions/dialogs",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.toggleDialogs=function(t){return null==t&&(t="true"!==this.$el.attr("aria-hidden")),this.$el.attr("aria-hidden",!t)},e.prototype.onShow=function(){return this.toggleDialogs(!0)},e.prototype.onBeforeEmpty=function(){return this.toggleDialogs(!1)},e}(Mn.Region)}),require.register("lib/views/confirm",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.template=e("./templates/confirm"),r.prototype.tagName="section",r.prototype.attributes={role:"alertdialog"},r.prototype.ui={btn_ok:"button.ok",btn_cancel:"button.cancel"},r.prototype.triggers={"click @ui.btn_ok":"confirm:true","click @ui.btn_cancel":"confirm:false","click button":"confirm:close"},r.prototype.onConfirmClose=function(){var t;return t=e("application"),t.layout.alerts.empty()},r}(Mn.ItemView)}),require.register("lib/views/templates/base/alert",function(t,e,r){var o=function(t){var e=[];return e.push('<div class="wrapper"><div role="contentinfo"></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("lib/views/templates/base/dialog",function(t,e,r){var o=function(t){var e=[];return e.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo"></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("lib/views/templates/confirm",function(t,e,r){var o=function(t){var e,r=[],o=t||{},n=o.title,a=o.message,i=o.btn_ok,s=o.btn_cancel;return r.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo"><h2>'+jade.escape(null==(e=n)?"":e)+"</h2><p>"+jade.escape(null==(e=a)?"":e)+'</p><nav><ul class="actions"><li><button class="ok">'+jade.escape(null==(e=i)?"":e)+'</button></li><li><button class="secondary cancel">'+jade.escape(null==(e=s)?"":e)+"</button></li></ul></nav></div></div>"),r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("locales/en",function(t,e,r){r.exports={"tools subactions settings":"settings","tools actions add contact":"add contact","tools search placeholder":"search for contacts, labels…","tools labels filters":"labels","tools labels filters all":"all contacts","card actions create":"create","card actions save":"save","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card action add select":"add field","card action add birthday":"birthday","card action add social":"social media","card action add link":"url","card action add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes"}}),require.register("locales/fr",function(t,e,r){r.exports={"tools subactions settings":"configuration","tools actions add contact":"ajouter un contact","tools search placeholder":"rechercher des contacts, libellés…","tools labels filters":"libellés","tools labels filters all":"tous les contacts","card actions create":"créer","card actions save":"enregistrer","card actions cancel":"annuler","card actions edit":"éditer","card actions delete":"supprimer","card action add select":"ajouter un champ","card action add birthday":"date de naissance","card action add social":"réseau social","card action add link":"lien","card action add other":"autre","card confirm delete title":"Supprimer %{name} ?","card confirm delete message":"Vous allez supprimer %{name} de vos contacts. Êtes-vous sûr ?","card confirm delete ok":"Le Supprimer","card confirm delete cancel":"Le garder","card confirm cancel title":"Voulez-vous vraiment quitter l'édition ?","card confirm cancel message":"Vos modifications n'ont pas été sauvées.","card confirm cancel ok":"Quitter","card confirm cancel cancel":"Rester","datapoint label name prefix":"civilité","datapoint label name first":"prénom","datapoint label name middle":"surnom","datapoint label name given":"nom","datapoint label name suffix":"particule","datapoint label org":"société","datapoint placeholder org":"ajouter une société","datapoint label department":"département","datapoint placeholder department":"ajouter un department","datapoint label title":"poste","datapoint placeholder title":"ajouter un poste","datapoint placeholder tel":"ajouter un numéro de téléphone","datapoint placeholder email":"ajouter une adresse email","datapoint placeholder adr":"ajouter une adresse","datapoint placeholder social":"ajouter un nom d'utilisateur","datapoint placeholder im":"ajouter un nom d'utilisateur","datapoint placeholder chat":"ajouter un nom d'utilisateur","datapoint placeholder url":"ajouter une url","datapoint placeholder other":"ajouter une information","datapoint label bday":"anniversaire","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes"}}),require.register("models/contact",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.idAttribute="_id",e.prototype.urlRoot="contacts",e.prototype.defaults={n:";;;;",datapoints:[]},e.prototype.parse=function(t){var e,r,o,n;for(r in t)n=t[r],""===n&&delete t[r];return(o=t.url)&&(delete t.url,t.datapoints.unshift({name:"url",type:"main",value:o})),e=new Backbone.Collection,e.comparator="name",t.datapoints&&e.add(t.datapoints),t.datapoints=e,t.tags=_.invoke(t.tags,"toLowerCase"),t},e.prototype.sync=function(t,r,o){var n,a;return o.attrs=r.toJSON(),n=r.attributes.datapoints.toJSON(),a=_.findWhere(n,{name:"url"}),a&&(o.attrs.datapoints=_.without(n,a),o.attrs.url=a.value),e.__super__.sync.apply(this,arguments)},e}(Backbone.Model)}),require.register("models/tag",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.idAttribute="_id",e}(Backbone.Model)}),require.register("routes/contacts",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.routes={"new":"create",":slug":"show",":slug/edit":"edit","":"index"},r.prototype._ensureContacts=function(t){var r;if(_.isFunction(t))return r=e("application"),r.contacts.isEmpty()?this.listenToOnce(r.contacts,"sync",t):t()},r.prototype._setCardState=function(t,r){var o,n;return o=e("application"),n=o.contacts.get(t)||"new"===t?t:!1,o.model.set("dialog",n),o.trigger("mode:edit",r)},r.prototype.index=function(){var t;return t=e("application"),t.model.set("filter",null)},r.prototype.show=function(t){return this._ensureContacts(_.wrap(this._setCardState,function(e){return e(t)}))},r.prototype.edit=function(t){return this._ensureContacts(_.wrap(this._setCardState,function(e){return e(t,!0)}))},r.prototype.create=function(){return this._setCardState("new",!0)},r}(Backbone.SubRoute)}),require.register("routes/index",function(t,e,r){var o,n,a,i={}.hasOwnProperty,s=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("routes/contacts"),a=e("routes/tags"),r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.routes={"":"index"},r.prototype.initialize=function(){var t;return t=e("application"),t.on("start",function(){var t,e;return t=new o("contacts"),e=new a("tags")}),this.listenTo(t.model,"change:dialog",function(e,r){var o,n;if(!r)return o=(n=t.model.get("filter"))?"tags/"+n:"contacts",this.navigate(o,{trigger:!0})})},r.prototype.index=function(){return this.navigate("contacts",{trigger:!0})},r}(Backbone.Router)}),require.register("routes/tags",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.routes={":slug":"filter"},r.prototype.filter=function(t){var r;return r=e("application"),r.model.set("filter",t)},r}(Backbone.SubRoute)}),require.register("views/app_layout",function(t,e,r){var o,n,a,i,s,p,c,l={}.hasOwnProperty,u=function(t,e){function r(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};a=e("models/contact"),i=e("views/models/contact"),p=e("views/drawer_layout"),c=e("views/tools/search"),s=e("views/contacts"),n=e("views/contacts/card"),r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return u(r,t),r.prototype.template=e("views/templates/layouts/app"),r.prototype.el="[role=application]",r.prototype.behaviors={Keyboard:{keymaps:{33:"key:pageup",34:"key:pagedown"}}},r.prototype.regions={content:"main [role=contentinfo]",drawer:"aside",toolbar:"main [role=toolbar]",dialogs:{selector:".dialogs",regionClass:e("lib/regions/dialogs")},alerts:{selector:".alerts",regionClass:e("lib/regions/dialogs")}},r.prototype.modelEvents={"change:dialog":"showContact"},r.prototype.childEvents={"dialog:close":function(){return this.model.set("dialog",!1)}},r.prototype.initialize=function(){var t;return t=e("application"),this.listenToOnce(t.contacts,"sync",function(){return this.showContactsList(),this.disableBusyState()})},r.prototype.onRender=function(){return this.showChildView("drawer",new p)},r.prototype.disableBusyState=function(){return this.$el.attr("aria-busy",!1)},r.prototype.showContactsList=function(){return this.showChildView("content",new s)},r.prototype.showContact=function(t,r){var o,s,p;return r?(o=e("application"),s="new"===r?new a(null,{parse:!0}):o.contacts.get(r),p=new i({"new":"new"===r},{model:s}),o.on("mode:edit",function(t){return p.set("edit",t)}),this.showChildView("dialogs",new n({model:p}))):(this.dialogs.empty(),this.content.currentView.focus())},r}(Mn.LayoutView)}),require.register("views/contacts/card",function(t,e,r){var o,n,a,i,s,p,c={}.hasOwnProperty,l=function(t,e){function r(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};a=e("views/contacts/components/datapoints"),s=e("views/contacts/components/xtras"),i=e("views/contacts/components/edit_actions"),p=e("lib/i18n"),o=e("config").contact,r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return l(r,t),r.prototype.template=e("views/templates/contacts/card"),r.prototype.tagName="section",r.prototype.className="card",r.prototype.attributes={role:"dialog"},r.prototype.behaviors=function(){var t;return t={name:this.options.model.get("fn")},{Navigator:{},Dialog:{},Form:{},Dropdown:{},Confirm:{triggers:{"click @ui.delete":{event:"delete",title:p("card confirm delete title",t),message:p("card confirm delete message",t),btn_ok:p("card confirm delete ok"),btn_cancel:p("card confirm delete cancel")}}}}},r.prototype.ui={navigate:"[href^=contacts], [data-next]",edit:".edit","delete":".delete",submit:"[type=submit]",cancel:".cancel",inputs:".group:not([data-cid]) :input:not(button)",add:".add button",clear:".clear"},r.prototype.modelEvents={"change:edit":"render","change:initials":"updateInitials",change:function(){return this.model.get("edit")?void 0:this.render()},"before:save":"syncDatapoints",save:"onSave",destroy:function(){return this.triggerMethod("dialog:close")}},r.prototype.childEvents={"form:key:enter":"onFormKeyEnter"},r.prototype.initialize=function(){return Mn.bindEntityEvents(this.model,this,this.model.viewEvents)},r.prototype.serializeData=function(){return _.extend(r.__super__.serializeData.apply(this,arguments),{lists:o.datapoints.types})},r.prototype.onRender=function(){return this.$(".datapoints").each(function(t){return function(e,r){var o;return o=r.dataset.type,t.addRegion(o,"[data-type="+o+"]"),t.showChildView(o,new a({collection:t.model[o],name:o,cardViewModel:t.model}))}}(this)),this.addRegion("xtras-infos","[data-type=xtras-infos]"),this.showChildView("xtras-infos",new s({model:this.model})),this.model.get("edit")?(this.addRegion("actions",".actions"),this.showChildView("actions",new i({model:this.model}))):void 0},r.prototype.onDomRefresh=function(){return this.model.get("edit")?this.ui.inputs.first().focus():this.ui.edit.focus()},r.prototype.onSave=function(){var t,r;if(this.model.get("new"))return t=e("application"),r="contacts/"+this.model.get("id"),t.router.navigate(r,{trigger:!0})},r.prototype.onEditCancel=function(){return this.model.get("new")?this.triggerMethod("dialog:close"):void 0},r.prototype.onFormKeyEnter=function(){var t;return t=this.$(":input:not(button):not([type=hidden])"),t.eq(t.index(document.activeElement)+1).focus()},r.prototype.onFormFieldAdd=function(t){return u.call(o.xtras,t)>=0?void 0:this.getRegion("xtras").currentView.addEmptyField(t)},r.prototype.updateInitials=function(t,e){return this.$(".initials").text(e)},r.prototype.syncDatapoints=function(){return this.regionManager.each(function(t){return function(e){var r,o,n;if(null!=(n=e.currentView)?n.getDatapoints:void 0)return o=e.currentView.options.name,r=e.currentView.getDatapoints(),t.model.syncDatapoints(o,r)}}(this))},r}(Mn.LayoutView)}),require.register("views/contacts/components/datapoint",function(t,e,r){var o,n,a={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("config").contact,r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.tagName=function(){return this.options.cardViewModel.get("edit")?"div":"li"},r.prototype.className="group",r.prototype.attributes=function(){return{"data-cid":this.model.cid}},r.prototype.template=e("views/templates/contacts/components/datapoint"),r.prototype.ui={type:"input.type"},r.prototype.events=function(){return"xtras"===this.options.name?{"keyup @ui.type":_.debounce(this.updateType,250),"change @ui.type":this.updateType}:void 0},r.prototype.serializeData=function(){var t,e;return t=r.__super__.serializeData.apply(this,arguments),e=function(){switch(t.name){case"social":case"chat":return"social";case"url":return"url";default:return"default"}}(),null==t.type&&(t.type=o.datapoints.types[e][0].split(":")[0]),{edit:this.options.cardViewModel.get("edit"),ref:this.options.cardViewModel.get("ref"),name:this.options.name,index:this.options.index,entity:e,point:t}},r.prototype.updateType=function(t){var e,r,n;return r=this.model.get("name"),"url"!==r?(e=_.find(o.datapoints.types.social,function(e){return e.match(new RegExp("^"+t.currentTarget.value.toLowerCase()))}),e?(n=e.split(":"),r=n[n.length-1]):r="other",this.$(t.currentTarget).siblings(".name").val(r)):void 0},r}(Mn.ItemView)}),require.register("views/contacts/components/datapoints",function(t,e,r){var o,n,a,i={}.hasOwnProperty,s=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=e("views/contacts/components/datapoint"),o=e("config").contact,r.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.tagName=function(){return this.options.cardViewModel.get("edit")?"fieldset":"ul"},e.prototype.behaviors={Form:{}},e.prototype.ui=function(){var t;return t={inputs:":input:not(button)","delete":".delete"},"xtras"!==this.options.name&&(t.autoAdd=".value"),t},e.prototype.childView=n,e.prototype.childViewOptions=function(t,e){return _.extend(_.pick(this.options,"name","cardViewModel"),{index:e})},e.prototype.initialize=function(t){return t.cardViewModel.get("edit")?(this.collection=new Backbone.Collection(t.collection.models),"xtras"!==this.options.name?this.addEmptyField():void 0):void 0},e.prototype.onFormFieldAdd=function(t){return this.addEmptyField(t)},e.prototype.onFormFieldUpdate=function(t){var e,r,o;return e=this.$(t).parents("[data-cid]"),o=this.collection.get(e.data("cid")),r=_.reduce(e.find(":input").serializeArray(),function(t,e){return t[_.last(e.name.split("."))]=e.value,t},{}),o.set(r)},e.prototype.onFormFieldDelete=function(t){return this.collection.remove(t)},e.prototype.getDatapoints=function(){return this.collection.filter(function(t){return""!==t.get("value")})},e.prototype.addEmptyField=function(t){var e;return e=this.collection.add({type:void 0,value:"",name:t||this.options.name}),p.call(o.datapoints.main,t)>=0?void 0:this.$("[data-cid="+e.cid+"] input.value").focus()},e}(Mn.CollectionView)}),require.register("views/contacts/components/edit_actions",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.tagName="dl",r.prototype.attributes={"aria-haspopup":!0,"aria-expanded":!1,"data-position":"top left"},r.prototype.template=e("views/templates/contacts/components/add-field-dropdown"),r.prototype.modelEvents={"change:bday":"render"},r}(Mn.ItemView)}),require.register("views/contacts/components/xtras",function(t,e,r){var o,n,a={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s=[].slice;o=e("config").contact,r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments);
}return i(r,t),r.prototype.tagName=function(){return this.model.get("edit")?"fieldset":"ul"},r.prototype.template=e("views/templates/contacts/components/xtras"),r.prototype.modelEvents=function(){return _.reduce(o.xtras,function(t,e){return t["change:"+e]=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],this.render.apply(this,t),this.setFocus.apply(this,t)},t},{})},r.prototype.serializeData=function(){return{edit:this.model.get("edit"),ref:this.model.get("ref"),xtras:_.reduce(o.xtras,function(t){return function(e,r){return t.model.has(r)&&(e[r]=t.model.get(r)),e}}(this),{})}},r.prototype.setFocus=function(t){var e,r;return r=this.model.get("ref"),e=_.keys(t.changed)[0],this.$("#"+e+"-"+r).focus()},r}(Mn.ItemView)}),require.register("views/contacts/group",function(t,e,r){var o,n,a={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("views/models/contact"),r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template=e("views/templates/contacts/group"),r.prototype.tagName="dl",r.prototype.className=function(){return this.model.get("isEmpty")?"empty":void 0},r.prototype.childViewContainer="ul",r.prototype.childView=e("views/contacts/row"),r.prototype.childViewOptions=function(t){return{model:new o({},{model:t})}},r.prototype.modelEvents={"change:isEmpty":"toggleEmpty"},r.prototype.toggleEmpty=function(){return this.$el.toggleClass("empty",this.model.get("isEmpty"))},r}(Mn.CompositeView)}),require.register("views/contacts/index",function(t,e,r){var o,n,a,i,s,p,c,l,u,d={}.hasOwnProperty,f=function(t,e){function r(){this.constructor=t}for(var o in e)d.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};a=BackboneProjections.Filtered,s=BackboneProjections.Sorted,u=e("lib/diacritics"),l=u.asciize,c=u.alphabet,i=e("views/models/group"),p=function(t){function r(t,o){var n;null==o&&(o={}),n=e("application"),this.tag=n.model.get("filter"),o.filter=function(t){return function(e){return t.tag?_.contains(e.attributes.tags,t.tag):!0}}(this),r.__super__.constructor.call(this,t,o),this.listenTo(n.model,"change:filter",function(t,e){return this.tag=e,this.update()})}return f(r,t),r.prototype.update=function(){return this.tag?this.reset(this.underlying.models.filter(this.options.filter)):this.reset(this.underlying.models)},r}(a),o=function(t){function e(t,r){r.comparator=function(t,e){return t.attributes.n.localeCompare(e.attributes.n)},r.comparator.induced=!0,r.filter=function(t){var e,o,n,a,i;return a=l(t.attributes.n).toLowerCase(),i=a.split(";"),o=i[0],e=i[1],n=o?o[0]:e?e[0]:"#","#"===r["char"]?!n.match(c):r["char"]===n},e.__super__.constructor.apply(this,arguments)}return f(e,t),e}(a),r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return f(r,t),r.prototype.template=function(){},r.prototype.attributes={role:"list",tabindex:0},r.prototype.childView=e("views/contacts/group"),r.prototype.childViewOptions=function(t){return{collection:t.compositeCollection}},r.prototype.ui={navigate:".name"},r.prototype.behaviors={Navigator:{},Dropdown:{}},r.prototype.initialize=function(){var t;return t=e("application"),this.taggedCollection=new p(t.contacts),this._buildFilteredCollections()},r.prototype._buildFilteredCollections=function(){var t,e,r,n,a;for(e="#abcdefghijklmnopqrstuvwxyz",this.collection=new Backbone.Collection,a=[],r=0,n=e.length;n>r;r++)t=e[r],a.push(function(t){return function(e){var r,n;return r={name:e},n=new o(t.taggedCollection,{"char":e}),t.collection.add(new i(r,{compositeCollection:n}))}}(this)(t));return a},r.prototype.scroll=function(t){var e,r;return e=t?1:-1,r=this._parent.$el.scrollTop()+this._parent.$el.innerHeight()*e,this._parent.$el.scrollTop(r)},r.prototype.onShow=function(){var t;return t=e("application"),this.listenTo(t.layout,{"key:pageup":this.scroll.bind(this,!1),"key:pagedown":this.scroll.bind(this,!0)}),this.focus()},r.prototype.focus=function(){return this.$el.focus()},r}(Mn.CompositeView)}),require.register("views/contacts/row",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.template=e("views/templates/contacts/row"),r.prototype.tagName="li",r.prototype.attributes={role:"listitem"},r.prototype.modelEvents={change:"render"},r}(Mn.ItemView)}),require.register("views/drawer_layout",function(t,e,r){var o,n,a,i,s={}.hasOwnProperty,p=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};a=e("views/models/drawer"),n=e("views/tools/default_actions"),i=e("views/labels/filters"),r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return p(r,t),r.prototype.template=e("views/templates/layouts/drawer"),r.prototype.className="tools",r.prototype.regions={actions:".tool-actions",labels:".tool-labels"},r.prototype.initialize=function(){var t;return t=e("application"),this.model=new a({},{model:t.model}),this.listenToOnce(t.tags,"sync",this.showFilters)},r.prototype.onRender=function(){return this.showChildView("actions",new n)},r.prototype.showFilters=function(){return this.showChildView("labels",new i({model:this.model}))},r}(Mn.LayoutView)}),require.register("views/labels/filter",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.template=e("views/templates/labels/filter"),r.prototype.tagName="li",r.prototype.serializeData=function(){var t;return t=e("application"),_.extend({},r.__super__.serializeData.apply(this,arguments),{selected:t.model.get("filter")===this.model.get("name")})},r}(Mn.ItemView)}),require.register("views/labels/filters",function(t,e,r){var o,n,a={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=BackboneProjections.Filtered,r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template=e("views/templates/labels/filters"),r.prototype.tagName="fieldset",r.prototype.ui={navigate:"a"},r.prototype.behaviors={Navigator:{}},r.prototype.childViewContainer="ul",r.prototype.childView=e("views/labels/filter"),r.prototype.modelEvents={"change:filter":"toggleSelected"},r.prototype.initialize=function(){var t;return t=e("application"),this.collection=new o(t.tags,{filter:function(e){var r;if(t.contacts.length)return r=t.contacts.find(function(t){return _.contains(t.attributes.tags,e.attributes.name)}),!!r}}),this.collection.listenTo(t.contacts,{reset:this.collection.update,update:this.collection.update})},r.prototype.toggleSelected=function(t,e){var r,o;return r=(o=this.collection.find({name:e}))?o.get("_id"):"all",this.$("[aria-checked]:not([for=filter-"+r+"])").attr("aria-checked",!1),this.$("[for=filter-"+r+"]").attr("aria-checked",!0)},r}(Mn.CompositeView)}),require.register("views/models/app",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults={selected:[],dialog:!1,filter:null},e}(Backbone.ViewModel)}),require.register("views/models/contact",function(t,e,r){var o,n,a,i,s={}.hasOwnProperty,p=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};a=BackboneProjections.Filtered,i=e("lib/diacritics").asciize,o=e("config").contact,r.exports=n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return p(r,t),r.prototype.defaults={"new":!1,edit:!1},r.prototype.map={avatar:"_attachments",initials:"n",name:"n"},r.prototype.events={save:"onSave",reset:"onReset"},r.prototype.viewEvents={"form:field:add":"addField","form:submit":function(){return this.save()},"edit:cancel":"reset","delete":function(){return this.destroy()}},r.prototype.initialize=function(){var t,e,r,n,a;for(this.onReset(),this.xtras=this.filterDatapoints(null),n=o.datapoints.main,a=[],e=0,r=n.length;r>e;e++)t=n[e],a.push(this[t]=this.filterDatapoints(t));return a},r.prototype.toJSON=function(){var t;return t=_.reduce(o.datapoints.main,function(t){return function(e,r){return e[r]=t[r].toJSON(),e}}(this),{xtras:this.xtras.toJSON()}),_.extend({},r.__super__.toJSON.apply(this,arguments),t)},r.prototype.getMappedAvatar=function(t){return(null!=t?t.picture:void 0)?"contacts/"+this.model.id+"/picture.png":null},r.prototype.getMappedInitials=function(t){var e,r,o;return o=t.split(";"),r=o[0],e=o[1],(""+(e?i(e)[0]:"")+(r?i(r)[0]:"")).toUpperCase()},r.prototype.getMappedName=function(t){var e,r,o,n,a,i,s;return s=t.split(";"),r=s[0],e=s[1],o=s[2],a=s[3],i=s[4],n={first:e,given:r},o&&(n.middle=o),a&&(n.prefix=a),i&&(n.suffix=i),n},r.prototype.saveMappedName=function(){var t,e;return e=_.clone(this.get("name")),(t={}).n=[e.given,e.first,e.middle,e.prefix,e.suffix].join(";"),t},r.prototype.addField=function(t){return c.call(o.xtras,t)>=0?this.set(t,""):void 0},r.prototype.filterDatapoints=function(t){return new a(this.model.get("datapoints"),{filter:function(e){var r;return c.call(o.datapoints.main,t)>=0?e.get("name")===t:(r=e.get("name"),c.call(o.datapoints.main,r)<0)}})},r.prototype.syncDatapoints=function(t,e){var r;return r=this.model.get("datapoints"),r.remove(_.difference(this[t].models,e)),r.add(_.difference(e,this[t].models))},r.prototype.onSave=function(){var t;if(this.get("new"))return t=e("application"),t.contacts.add(this.model)},r.prototype.onReset=function(){return this.set("ref",this.model.cid)},r}(Backbone.ViewModel)}),require.register("views/models/drawer",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.map={mode:"selected"},e.prototype.getMappedMode=function(t){return t.length?"select":"display"},e}(Backbone.ViewModel)}),require.register("views/models/group",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults=function(){return{isEmpty:this.isEmpty()}},e.prototype.initialize=function(){return this.listenTo(this.compositeCollection,{update:function(){return this.set("isEmpty",this.isEmpty())},reset:function(){return this.set("isEmpty",this.isEmpty())}})},e.prototype.isEmpty=function(){return!this.compositeCollection.length},e}(Backbone.ViewModel)}),require.register("views/templates/contacts/card",function(e,r,o){var n=function(e){var r,o=[],n={},a=e||{},i=a.ref,s=a.edit,p=a.lists,c=a.avatar,l=a.initials,u=a.name,d=a.org,f=a.department,h=a.title,y=a.note,v=a.id,m=a._id;return n.input=function(e,n){var a=(this&&this.block,this&&this.attributes||{}),s=t("datapoint label "+e.replace("."," ")),p=[e,i].join("-"),c=a.placeholder?t("datapoint placeholder "+e):!1,l=a.value;o.push("<label"+jade.attr("for",p,!0,!1)+' class="group"><span class="type">'+jade.escape(null==(r=s)?"":r)+"</span>"),"textarea"==n?o.push("<textarea"+jade.attr("id",p,!0,!1)+jade.attr("name",e,!0,!1)+' class="value">'+jade.escape(null==(r=l)?"":r)+"</textarea>"):o.push("<input"+jade.attr("id",p,!0,!1)+jade.attr("name",e,!0,!1)+' type="text"'+jade.attr("value",l,!0,!1)+jade.attr("placeholder",c,!0,!1)+jade.cls(["value",l?void 0:"empty"],[null,!0])+'/><button class="link clear"><div class="fa fa-times"></div></button>'),o.push("</label>")},n.formatJob=function(t,e,n){this&&this.block,this&&this.attributes||{};t&&o.push(jade.escape(null==(r=t)?"":r)),t&&e&&o.push(" - "),e&&o.push(jade.escape(null==(r=e)?"":r)),(e&&n||t&&n)&&o.push(" "),n&&o.push("("+jade.escape(null==(r=n)?"":r)+")")},n.formatName=function(t){this&&this.block,this&&this.attributes||{};t.prefix&&o.push(jade.escape(null==(r=t.prefix)?"":r)+" "),o.push(jade.escape(null==(r=t.first)?"":r)+" "),t.middle&&o.push(jade.escape(null==(r=t.middle)?"":r)+" "),o.push("<b>"+jade.escape(null==(r=t.given)?"":r)+"</b>"),t.suffix&&o.push(" "+jade.escape(null==(r=t.suffix)?"":r))},o.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo">'),n.formatName=function(t){this&&this.block,this&&this.attributes||{};t.prefix&&o.push(jade.escape(null==(r=t.prefix)?"":r)+" "),o.push(jade.escape(null==(r=t.first)?"":r)+" "),t.middle&&o.push(jade.escape(null==(r=t.middle)?"":r)+" "),o.push("<b>"+jade.escape(null==(r=t.given)?"":r)+"</b>"),t.suffix&&o.push(" "+jade.escape(null==(r=t.suffix)?"":r))},n.formatJob=function(t,e,n){this&&this.block,this&&this.attributes||{};t&&o.push(jade.escape(null==(r=t)?"":r)),t&&e&&o.push(" - "),e&&o.push(jade.escape(null==(r=e)?"":r)),(e&&n||t&&n)&&o.push(" "),n&&o.push("("+jade.escape(null==(r=n)?"":r)+")")},n.input=function(e,n){var a=(this&&this.block,this&&this.attributes||{}),s=t("datapoint label "+e.replace("."," ")),p=[e,i].join("-"),c=a.placeholder?t("datapoint placeholder "+e):!1,l=a.value;o.push("<label"+jade.attr("for",p,!0,!1)+' class="group"><span class="type">'+jade.escape(null==(r=s)?"":r)+"</span>"),"textarea"==n?o.push("<textarea"+jade.attr("id",p,!0,!1)+jade.attr("name",e,!0,!1)+' class="value">'+jade.escape(null==(r=l)?"":r)+"</textarea>"):o.push("<input"+jade.attr("id",p,!0,!1)+jade.attr("name",e,!0,!1)+' type="text"'+jade.attr("value",l,!0,!1)+jade.attr("placeholder",c,!0,!1)+jade.cls(["value",l?void 0:"empty"],[null,!0])+'/><button class="link clear"><div class="fa fa-times"></div></button>'),o.push("</label>")},s&&function(){var t=p;if("number"==typeof t.length)for(var e=0,r=t.length;r>e;e++){var n=t[e];o.push("<datalist"+jade.attr("id","list-"+e,!0,!1)+">"),function(){var t=n;if("number"==typeof t.length)for(var e=0,r=t.length;r>e;e++){var a=t[e],i=a.split(":");o.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}else{var r=0;for(var e in t){r++;var a=t[e],i=a.split(":");o.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}}}.call(this),o.push("</datalist>")}else{var r=0;for(var e in t){r++;var n=t[e];o.push("<datalist"+jade.attr("id","list-"+e,!0,!1)+">"),function(){var t=n;if("number"==typeof t.length)for(var e=0,r=t.length;r>e;e++){var a=t[e],i=a.split(":");o.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}else{var r=0;for(var e in t){r++;var a=t[e],i=a.split(":");o.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}}}.call(this),o.push("</datalist>")}}}.call(this),o.push("<div>"),c?o.push("<img"+jade.attr("src",c,!0,!1)+' class="avatar"/>'):o.push('<span class="avatar initials">'+jade.escape(null==(r=l)?"":r)+"</span>"),o.push("</div><div"+jade.cls(["data",s?"edit":""],[null,!0])+">"),s?(n.input.call({attributes:{value:jade.escape(u.prefix)}},"name.prefix"),n.input.call({attributes:{value:jade.escape(u.first)}},"name.first"),n.input.call({attributes:{value:jade.escape(u.middle)}},"name.middle"),n.input.call({attributes:{value:jade.escape(u.given)}},"name.given"),n.input.call({attributes:{value:jade.escape(u.suffix)}},"name.suffix"),o.push('<fieldset data-type="infos" class="block">'),n.input.call({attributes:{value:jade.escape(d),placeholder:!0}},"org"),n.input.call({attributes:{value:jade.escape(f),placeholder:!0}},"department"),n.input.call({attributes:{value:jade.escape(h),placeholder:!0}},"title"),o.push("</fieldset>")):(o.push("<h1>"),n.formatName(u),o.push('</h1><ul data-type="infos" class="block">'),(h||d||f||y)&&((h||d||f)&&(o.push("<li>"),n.formatJob(h,d,f),o.push("</li>")),y&&o.push("<li>"+jade.escape(null==(r=y)?"":r)+"</li>")),o.push("</ul>")),o.push('<div data-type="tel" class="block datapoints"></div><div data-type="email" class="block datapoints"></div><div data-type="adr" class="block datapoints"></div><div class="block"><div data-type="xtras" class="datapoints"></div><div data-type="xtras-infos"></div>'),s&&n.input.call({attributes:{value:jade.escape(y)}},"note","textarea"),o.push("</div>"),s&&o.push('<div class="actions"></div>'),o.push("</div><aside><ul>"),s?(v?o.push('<li><button type="submit"'+jade.attr("data-next","contacts/"+m,!0,!1)+' class="outline"><div class="fa fa-check"></div><span>'+jade.escape(null==(r=t("card actions save"))?"":r)+"</span></button></li>"):o.push('<li><button type="submit" class="outline"><div class="fa fa-plus"></div><span>'+jade.escape(null==(r=t("card actions create"))?"":r)+"</span></button></li>"),o.push('<li><a role="button"'+jade.attr("href",v?"contacts/"+m:"contacts",!0,!1)+jade.attr("data-confirm",'{"event":"edit:cancel","title":"'+t("card confirm cancel title")+'","message":"'+t("card confirm cancel message")+'","btn_ok":"'+t("card confirm cancel ok")+'","btn_cancel":"'+t("card confirm cancel cancel")+'"}',!0,!1)+' class="cancel outline secondary"><div class="fa fa-times"></div><span>'+jade.escape(null==(r=t("card actions cancel"))?"":r)+"</span></a></li>")):o.push('<li><a role="button"'+jade.attr("href","contacts/"+m+"/edit",!0,!1)+' class="edit outline secondary"><div class="fa fa-pencil"></div><span>'+jade.escape(null==(r=t("card actions edit"))?"":r)+'</span></a></li><li><button class="delete outline danger special"><div class="fa fa-trash"></div><span>'+jade.escape(null==(r=t("card actions delete"))?"":r)+"</span></button></li>"),o.push("</ul></aside></div></div>"),o.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof o&&o&&o.exports&&(o.exports=n)}),require.register("views/templates/contacts/components/add-field-dropdown",function(e,r,o){var n=function(e){var r,o=[],n=e||{},a=n.bday;return o.push('<dt role="button" class="outline secondary caret">'+jade.escape(null==(r=t("card action add select"))?"":r)+'<i class="fa fa-caret-down"></i></dt><dd class="add"><ul>'),null==a&&o.push('<li><button value="bday" class="link">'+jade.escape(null==(r=t("card action add birthday"))?"":r)+"</button></li>"),o.push('<li><button value="social" class="link">'+jade.escape(null==(r=t("card action add social"))?"":r)+'</button></li><li><button value="url" class="link">'+jade.escape(null==(r=t("card action add link"))?"":r)+'</button></li><li><button value="other" class="link">'+jade.escape(null==(r=t("card action add other"))?"":r)+"</button></li></ul></dd>"),o.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof o&&o&&o.exports&&(o.exports=n)}),require.register("views/templates/contacts/components/datapoint",function(e,r,o){var n=function(e){var r,o=[],n={},a=e||{},i=a.entity,s=a.ref,p=a.edit,c=a.point,l=a.name,u=a.index;return n.formatPoint=function(t,e){this&&this.block,this&&this.attributes||{};if(e)switch(t.type.toLowerCase()){case"home":var e="home";break;case"work":var e="building";break;default:switch(t.name){case"tel":var e="phone";break;case"email":var e="envelope";break;default:var e=!1}}o.push("<i"+jade.cls(["type",e?"fa fa-"+e:!1],[null,!0])+">"+jade.escape(null==(r=t.type)?"":r)+'&nbsp;</i><span class="value">'+jade.escape(null==(r=t.value)?"":r)+"</span>")},n.groupInput=function(e,r,n){var a=(this&&this.block,this&&this.attributes||{}),p=a.placeholder?t("datapoint placeholder "+("default"==i?e.name:i)):!1,c=r+"."+n;o.push("<input"+jade.attr("id",""+c+".type-"+s,!0,!1)+jade.attr("name",""+c+".type",!0,!1)+' type="text"'+jade.attr("value",e.type,!0,!1)+jade.attr("list","list-"+i,!0,!1)+' class="type"/><input'+jade.attr("id",""+c+".value-"+s,!0,!1)+jade.attr("name",""+c+".value",!0,!1)+' type="text"'+jade.attr("value",e.value,!0,!1)+jade.attr("placeholder",p,!0,!1)+jade.cls(["value",e.value?void 0:"empty"],[null,!0])+'/><button class="link delete"><div class="fa fa-trash"></div></button><input'+jade.attr("id",""+c+".name-"+s,!0,!1)+jade.attr("name",""+c+".name",!0,!1)+' type="hidden"'+jade.attr("value",e.name,!0,!1)+' class="name"/>')},p?n.groupInput.call({attributes:{placeholder:!0}},c,l,u):n.formatPoint(c),o.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof o&&o&&o.exports&&(o.exports=n)}),require.register("views/templates/contacts/components/xtras",function(e,r,o){var n=function(e){var r,o=[],n={},a=e||{},i=a.ref,s=a.xtras,p=a.edit;return n.formatPoint=function(t,e){this&&this.block,this&&this.attributes||{};if(e)switch(t.type.toLowerCase()){case"home":var e="home";break;case"work":var e="building";break;default:switch(t.name){case"tel":var e="phone";break;case"email":var e="envelope";break;default:var e=!1}}o.push("<i"+jade.cls(["type",e?"fa fa-"+e:!1],[null,!0])+">"+jade.escape(null==(r=t.type)?"":r)+'&nbsp;</i><span class="value">'+jade.escape(null==(r=t.value)?"":r)+"</span>")},n.input=function(e,n){var a=(this&&this.block,this&&this.attributes||{}),s=t("datapoint label "+e.replace("."," ")),p=[e,i].join("-"),c=a.placeholder?t("datapoint placeholder "+e):!1,l=a.value;o.push("<label"+jade.attr("for",p,!0,!1)+' class="group"><span class="type">'+jade.escape(null==(r=s)?"":r)+"</span>"),"textarea"==n?o.push("<textarea"+jade.attr("id",p,!0,!1)+jade.attr("name",e,!0,!1)+' class="value">'+jade.escape(null==(r=l)?"":r)+"</textarea>"):o.push("<input"+jade.attr("id",p,!0,!1)+jade.attr("name",e,!0,!1)+' type="text"'+jade.attr("value",l,!0,!1)+jade.attr("placeholder",c,!0,!1)+jade.cls(["value",l?void 0:"empty"],[null,!0])+'/><button class="link clear"><div class="fa fa-times"></div></button>'),o.push("</label>")},function(){var e=s;if("number"==typeof e.length)for(var r=0,a=e.length;a>r;r++){var i=e[r];if(p)n.input.call({attributes:{value:jade.escape(i),placeholder:!0}},r,"text");else{var c={type:t("datapoint label "+r),value:i};o.push('<li class="group">'),n.formatPoint(c),o.push("</li>")}}else{var a=0;for(var r in e){a++;var i=e[r];if(p)n.input.call({attributes:{value:jade.escape(i),placeholder:!0}},r,"text");else{var c={type:t("datapoint label "+r),value:i};o.push('<li class="group">'),n.formatPoint(c),o.push("</li>")}}}}.call(this),o.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof o&&o&&o.exports&&(o.exports=n)}),require.register("views/templates/contacts/group",function(t,e,r){var o=function(t){var e,r=[],o=t||{},n=o.name;return r.push('<dt role="columnheader">'+jade.escape(null==(e=n)?"":e)+'</dt><dd role="rowgroup"><ul></ul></dd>'),r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/templates/contacts/helpers",function(t,e,r){var o=function(t){var e=[];return e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/templates/contacts/row",function(t,e,r){var o=function(t){var e,r=[],o={},n=t||{},a=n._id,i=n.avatar,s=n.initials,p=n.name,c=n.tel,l=n.email;return o.formatName=function(t){this&&this.block,this&&this.attributes||{};t.prefix&&r.push(jade.escape(null==(e=t.prefix)?"":e)+" "),r.push(jade.escape(null==(e=t.first)?"":e)+" "),t.middle&&r.push(jade.escape(null==(e=t.middle)?"":e)+" "),r.push("<b>"+jade.escape(null==(e=t.given)?"":e)+"</b>"),t.suffix&&r.push(" "+jade.escape(null==(e=t.suffix)?"":e))},o.formatPoint=function(t,o){this&&this.block,this&&this.attributes||{};if(o)switch(t.type.toLowerCase()){case"home":var o="home";break;case"work":var o="building";break;default:switch(t.name){case"tel":var o="phone";break;case"email":var o="envelope";break;default:var o=!1}}r.push("<i"+jade.cls(["type",o?"fa fa-"+o:!1],[null,!0])+">"+jade.escape(null==(e=t.type)?"":e)+'&nbsp;</i><span class="value">'+jade.escape(null==(e=t.value)?"":e)+"</span>")},o.formatDatapoints=function(t,e){this&&this.block,this&&this.attributes||{};if(t.length){var n=t.length>1;r.push('<dl role="gridcell"'+jade.attr("aria-haspopup",n?"true":"false",!0,!1)+' aria-expanded="false" data-position="bottom left"'+jade.cls([e],[!0])+"><dt>"),o.formatPoint(t[0]),n&&r.push('<span class="fa fa-caret-down"></span>'),r.push("</dt>"),n&&(r.push("<dd><ul>"),function(){var e=t;if("number"==typeof e.length)for(var n=0,a=e.length;a>n;n++){var i=e[n];r.push("<li>"),o.formatPoint(i,!0),r.push("</li>")}else{var a=0;for(var n in e){a++;var i=e[n];r.push("<li>"),o.formatPoint(i,!0),r.push("</li>")}}}.call(this),r.push("</ul></dd>")),r.push("</dl>")}else r.push('<div role="gridcell"'+jade.cls(["placeholder",e],[null,!0])+"></div>")},r.push('<a role="gridcell"'+jade.attr("href","contacts/"+a,!0,!1)+' class="name">'),i?r.push("<img"+jade.attr("src",i,!0,!1)+' class="avatar"/>'):r.push('<span class="avatar initials">'+jade.escape(null==(e=s)?"":e)+"</span>"),r.push("<p>"),o.formatName(p),r.push("</p></a>"),o.formatDatapoints(c,"tel"),o.formatDatapoints(l,"email"),r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/templates/labels/filter",function(t,e,r){var o=function(t){var e,r=[],o=t||{},n=o._id,a=o.selected,i=o.name;return r.push("<label"+jade.attr("for","filter-"+n,!0,!1)+jade.attr("aria-checked",a?"true":"false",!0,!1)+'><span class="radio"></span><span class="radio-selected"></span><input type="radio"'+jade.attr("id","filter-"+n,!0,!1)+' name="label-filters"/><a'+jade.attr("href","all"==n?"contacts":"tags/"+i.toLowerCase(),!0,!1)+' class="label">'+jade.escape(null==(e=i)?"":e)+"</a></label>"),r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/templates/labels/filters",function(e,r,o){var n=function(e){var r,o=[],n=e||{},a=n.filter;o.push("<legend>"+jade.escape(null==(r=t("tools labels filters"))?"":r)+"</legend><nav><ul><li>");var i="all",s=t("tools labels filters all"),p=null==a;return o.push("<label"+jade.attr("for","filter-"+i,!0,!1)+jade.attr("aria-checked",p?"true":"false",!0,!1)+'><span class="radio"></span><span class="radio-selected"></span><input type="radio"'+jade.attr("id","filter-"+i,!0,!1)+' name="label-filters"/><a'+jade.attr("href","all"==i?"contacts":"tags/"+s.toLowerCase(),!0,!1)+' class="label">'+jade.escape(null==(r=s)?"":r)+"</a></label></li></ul></nav>"),o.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof o&&o&&o.exports&&(o.exports=n)}),require.register("views/templates/layouts/app",function(t,e,r){var o=function(t){var e=[];return e.push('<aside class="drawer"></aside><main><div role="toolbar"></div><div role="contentinfo"></div></main><div aria-hidden="true" class="dialogs"></div><div aria-hidden="true" class="alerts"></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/templates/layouts/drawer",function(t,e,r){var o=function(t){var e=[];return e.push('<div class="tool-actions"></div><div class="tool-labels"></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/templates/tools/default_actions",function(e,r,o){var n=function(e){var r,o=[];return o.push('<nav><ul><li><a href="contacts/new" role="button" class="add secondary"><div class="fa fa-plus"></div><span>'+jade.escape(null==(r=t("tools actions add contact"))?"":r)+"</span></a></li></ul></nav>"),o.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof o&&o&&o.exports&&(o.exports=n)}),require.register("views/templates/tools/search",function(e,r,o){var n=function(e){var r=[];return r.push('<label for="contacts-search"><span class="fa fa-search"></span><input type="text" id="contacts-search"'+jade.attr("placeholder",t("tools search placeholder"),!0,!1)+"/></label>"),r.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof o&&o&&o.exports&&(o.exports=n)}),require.register("views/tools/default_actions",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.template=e("views/templates/tools/default_actions"),r.prototype.tagName="fieldset",r.prototype.behaviors={Navigator:{}},r.prototype.ui={navigate:".add"},r}(Mn.ItemView)}),require.register("views/tools/search",function(t,e,r){var o,n={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.template=e("views/templates/tools/search"),r.prototype.tagName="form",r}(Mn.ItemView)});